#############
# tmux v2.6 #
#############

# prefix
set-option -g prefix C-space
set -g prefix2 C-b
bind r source-file ~/.config/tmux/tmux.conf\; display "Tmux config reloaded"

# display ---------------------------------------------------------------------
set-option -a terminal-features 'xterm-256color:RGB'
set -g base-index 1                     # count windows from 1
set -g focus-events on
set-window-option -g pane-base-index 1  # count panes from 1

setw -g automatic-rename on   # rename window to reflect current program
set -g renumber-windows on    # renumber windows when a window is closed
set -g set-titles on          # set terminal title
set -g display-panes-time 800 # slightly longer pane indicators display time
set -g display-time 4000      # slightly longer status messages display time
set -g visual-activity off
set -g monitor-activity on
set-window-option -g window-status-activity-style bg=default,fg=default
set-window-option -g window-status-separator "｜"

# Selected window
set -g window-style 'bg=#1d1f30'
set -g window-active-style 'bg=#1a1b26'
set -g pane-active-border fg=blue
set -ag pane-active-border bg=default

# Status bar
set-option -g status-interval 5
set -g status-position bottom
set -g status-bg "#32344a"
set -g status-fg colour111

set -g status-left "#{?client_prefix,#[bg=yellow],}  "

set -g status-right-length 100
set -g status-right  '╱#[bg=default]  #H:#{session_name} '
set -ga status-right '╱#[bg=default] %Y-%m-%d'
set -ga status-right '#[bg=default] %H:%M '


setw -g window-status-format '#I:#W#{?window_activity_flag,#[underscore]*,}'
setw -g window-status-current-format '#[reverse] #I:#W #[noreverse]'

# input -----------------------------------------------------------------------
set -g mouse on
set-option -sg escape-time 0 # fix escape delay on vim/neovim
set-option -ga terminal-overrides ',screen-256color:Tc'

# move tabs with ctrl + shift + arrow
bind-key -n C-S-Left swap-window -t -1
bind-key -n C-S-Right swap-window -t +1
# navigate tabs with shift + arrow
bind-key -n S-Left previous-window
bind-key -n S-Right next-window

bind-key Z set-option -g status            # Z toggle status bar
bind -n C-l send-keys C-l \; clear-history # C-l clear history

# Copy
set-window-option -g mode-keys vi
set-option -g set-clipboard on # necessary for copy to intergrate with macOSX clipbard
bind-key -T copy-mode-vi v send-keys -X begin-selection           # Use v to trigger selection
bind-key -T copy-mode-vi y send-keys -X copy-selection-and-cancel # Use y to yank current selection
bind-key -T copy-mode-vi Escape send-keys -X cancel

#bind-key v copy-mode-vi
#bind-key -T copy-mode-vi Escape send-keys -X cancel

bind Enter copy-mode # enter copy mode

bind b list-buffers  # list paste buffers
bind P choose-buffer # choose which buffer to paste from
bind p paste-buffer  # paste from the top paste buffer

# pane navigation
bind -r h select-pane -L  # move left
bind -r j select-pane -D  # move down
bind -r k select-pane -U  # move up
bind -r l select-pane -R  # move right
bind > swap-pane -D       # swap current pane with the next one
bind < swap-pane -U       # swap current pane with the previous one

# pane resizing
bind -r H resize-pane -L 2
bind -r J resize-pane -D 2
bind -r K resize-pane -U 2
bind -r L resize-pane -R 2


# plugin manager --------------------------------------------------------------
#  - to install: git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm

# List of plugins
set -g @plugin 'tmux-plugins/tpm'  # tmux plugin manager
set -g @plugin 'schasse/tmux-jump' # easymotion style navigation for copying
# https://github.com/roy2220/easyjump.tmux # to be checked, maybe better than tmux-jump?

# @TODO: tmux-jump
#
# unbind-key -T prefix s
# set -g @jump-key 's'

## Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
